<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.magic.rent.mapper.HouseMapper">
    <resultMap id="BaseResultMap" type="com.magic.rent.pojo.House">
        <id column="ID" property="id" jdbcType="INTEGER"/>
        <result column="TITTLE" property="tittle" jdbcType="VARCHAR"/>
        <result column="DESCRIPTION" property="description" jdbcType="VARCHAR"/>
        <result column="FACE_ID" property="faceId" jdbcType="INTEGER"/>
        <result column="FLOOR_AREA" property="floorArea" jdbcType="DOUBLE"/>
        <result column="POOL_AREA" property="poolArea" jdbcType="DOUBLE"/>
        <result column="EXPECT_PRICE" property="expectPrice" jdbcType="DOUBLE"/>
        <result column="BROKERAGE" property="brokerage" jdbcType="DOUBLE"/>
        <result column="COMMUNITY_ID" property="communityId" jdbcType="INTEGER"/>
        <result column="FLOOR" property="floor" jdbcType="INTEGER"/>
        <result column="LAYOUT_ID" property="layoutId" jdbcType="INTEGER"/>
        <result column="HOUSE_DECORATION_ID" property="houseDecorationId" jdbcType="INTEGER"/>
        <result column="PROVINCE_ID" property="provinceId" jdbcType="INTEGER"/>
        <result column="CITY_ID" property="cityId" jdbcType="INTEGER"/>
        <result column="AREA_ID" property="areaId" jdbcType="INTEGER"/>
        <result column="ADDRESS" property="address" jdbcType="VARCHAR"/>
        <result column="ELEVATOR_TYPE_ID" property="elevatorTypeId" jdbcType="INTEGER"/>
        <result column="AGE" property="age" jdbcType="INTEGER"/>
        <result column="HOUSE_STATUS" property="houseStatus" jdbcType="INTEGER"/>
        <result column="SYS_STATUS" property="sysStatus" jdbcType="INTEGER"/>
        <result column="AUDITING_TIME" property="auditingTime" jdbcType="TIMESTAMP"/>
        <result column="OPERATE_TIME" property="operateTime" jdbcType="TIMESTAMP"/>
    </resultMap>
    <sql id="Base_Column_List">
    HOUSE.ID, HOUSE.TITTLE, HOUSE.DESCRIPTION, HOUSE.FACE_ID, HOUSE.FLOOR_AREA, HOUSE.POOL_AREA, HOUSE.EXPECT_PRICE, HOUSE.BROKERAGE,
    HOUSE.COMMUNITY_ID, HOUSE.FLOOR, HOUSE.LAYOUT_ID, HOUSE.HOUSE_DECORATION_ID, HOUSE.PROVINCE_ID, HOUSE.CITY_ID, HOUSE.AREA_ID,
    HOUSE.ADDRESS, HOUSE.ELEVATOR_TYPE_ID, HOUSE.AGE, HOUSE.HOUSE_STATUS, HOUSE.SYS_STATUS, HOUSE.AUDITING_TIME, HOUSE.OPERATE_TIME
  </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        select
        <include refid="Base_Column_List"/>
        from HOUSE
        where ID = #{id,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from HOUSE
    where ID = #{id,jdbcType=INTEGER}
  </delete>
    <insert id="insert" parameterType="com.magic.rent.pojo.House">
    insert into HOUSE (ID, TITTLE, DESCRIPTION, 
      FACE_ID, FLOOR_AREA, POOL_AREA, 
      EXPECT_PRICE, BROKERAGE, COMMUNITY_ID, 
      FLOOR, LAYOUT_ID, HOUSE_DECORATION_ID, 
      PROVINCE_ID, CITY_ID, AREA_ID, 
      ADDRESS, ELEVATOR_TYPE_ID, AGE, 
      HOUSE_STATUS, SYS_STATUS, AUDITING_TIME, 
      OPERATE_TIME)
    values (#{id,jdbcType=INTEGER}, #{tittle,jdbcType=VARCHAR}, #{description,jdbcType=VARCHAR}, 
      #{faceId,jdbcType=INTEGER}, #{floorArea,jdbcType=DOUBLE}, #{poolArea,jdbcType=DOUBLE}, 
      #{expectPrice,jdbcType=DOUBLE}, #{brokerage,jdbcType=DOUBLE}, #{communityId,jdbcType=INTEGER}, 
      #{floor,jdbcType=INTEGER}, #{layoutId,jdbcType=INTEGER}, #{houseDecorationId,jdbcType=INTEGER}, 
      #{provinceId,jdbcType=INTEGER}, #{cityId,jdbcType=INTEGER}, #{areaId,jdbcType=INTEGER}, 
      #{address,jdbcType=VARCHAR}, #{elevatorTypeId,jdbcType=INTEGER}, #{age,jdbcType=INTEGER}, 
      #{houseStatus,jdbcType=INTEGER}, #{sysStatus,jdbcType=INTEGER}, #{auditingTime,jdbcType=TIMESTAMP}, 
      #{operateTime,jdbcType=TIMESTAMP})
  </insert>
    <insert id="insertSelective" parameterType="com.magic.rent.pojo.House">
        insert into HOUSE
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                ID,
            </if>
            <if test="tittle != null">
                TITTLE,
            </if>
            <if test="description != null">
                DESCRIPTION,
            </if>
            <if test="faceId != null">
                FACE_ID,
            </if>
            <if test="floorArea != null">
                FLOOR_AREA,
            </if>
            <if test="poolArea != null">
                POOL_AREA,
            </if>
            <if test="expectPrice != null">
                EXPECT_PRICE,
            </if>
            <if test="brokerage != null">
                BROKERAGE,
            </if>
            <if test="communityId != null">
                COMMUNITY_ID,
            </if>
            <if test="floor != null">
                FLOOR,
            </if>
            <if test="layoutId != null">
                LAYOUT_ID,
            </if>
            <if test="houseDecorationId != null">
                HOUSE_DECORATION_ID,
            </if>
            <if test="provinceId != null">
                PROVINCE_ID,
            </if>
            <if test="cityId != null">
                CITY_ID,
            </if>
            <if test="areaId != null">
                AREA_ID,
            </if>
            <if test="address != null">
                ADDRESS,
            </if>
            <if test="elevatorTypeId != null">
                ELEVATOR_TYPE_ID,
            </if>
            <if test="age != null">
                AGE,
            </if>
            <if test="houseStatus != null">
                HOUSE_STATUS,
            </if>
            <if test="sysStatus != null">
                SYS_STATUS,
            </if>
            <if test="auditingTime != null">
                AUDITING_TIME,
            </if>
            <if test="operateTime != null">
                OPERATE_TIME,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=INTEGER},
            </if>
            <if test="tittle != null">
                #{tittle,jdbcType=VARCHAR},
            </if>
            <if test="description != null">
                #{description,jdbcType=VARCHAR},
            </if>
            <if test="faceId != null">
                #{faceId,jdbcType=INTEGER},
            </if>
            <if test="floorArea != null">
                #{floorArea,jdbcType=DOUBLE},
            </if>
            <if test="poolArea != null">
                #{poolArea,jdbcType=DOUBLE},
            </if>
            <if test="expectPrice != null">
                #{expectPrice,jdbcType=DOUBLE},
            </if>
            <if test="brokerage != null">
                #{brokerage,jdbcType=DOUBLE},
            </if>
            <if test="communityId != null">
                #{communityId,jdbcType=INTEGER},
            </if>
            <if test="floor != null">
                #{floor,jdbcType=INTEGER},
            </if>
            <if test="layoutId != null">
                #{layoutId,jdbcType=INTEGER},
            </if>
            <if test="houseDecorationId != null">
                #{houseDecorationId,jdbcType=INTEGER},
            </if>
            <if test="provinceId != null">
                #{provinceId,jdbcType=INTEGER},
            </if>
            <if test="cityId != null">
                #{cityId,jdbcType=INTEGER},
            </if>
            <if test="areaId != null">
                #{areaId,jdbcType=INTEGER},
            </if>
            <if test="address != null">
                #{address,jdbcType=VARCHAR},
            </if>
            <if test="elevatorTypeId != null">
                #{elevatorTypeId,jdbcType=INTEGER},
            </if>
            <if test="age != null">
                #{age,jdbcType=INTEGER},
            </if>
            <if test="houseStatus != null">
                #{houseStatus,jdbcType=INTEGER},
            </if>
            <if test="sysStatus != null">
                #{sysStatus,jdbcType=INTEGER},
            </if>
            <if test="auditingTime != null">
                #{auditingTime,jdbcType=TIMESTAMP},
            </if>
            <if test="operateTime != null">
                #{operateTime,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.magic.rent.pojo.House">
        update HOUSE
        <set>
            <if test="tittle != null">
                TITTLE = #{tittle,jdbcType=VARCHAR},
            </if>
            <if test="description != null">
                DESCRIPTION = #{description,jdbcType=VARCHAR},
            </if>
            <if test="faceId != null">
                FACE_ID = #{faceId,jdbcType=INTEGER},
            </if>
            <if test="floorArea != null">
                FLOOR_AREA = #{floorArea,jdbcType=DOUBLE},
            </if>
            <if test="poolArea != null">
                POOL_AREA = #{poolArea,jdbcType=DOUBLE},
            </if>
            <if test="expectPrice != null">
                EXPECT_PRICE = #{expectPrice,jdbcType=DOUBLE},
            </if>
            <if test="brokerage != null">
                BROKERAGE = #{brokerage,jdbcType=DOUBLE},
            </if>
            <if test="communityId != null">
                COMMUNITY_ID = #{communityId,jdbcType=INTEGER},
            </if>
            <if test="floor != null">
                FLOOR = #{floor,jdbcType=INTEGER},
            </if>
            <if test="layoutId != null">
                LAYOUT_ID = #{layoutId,jdbcType=INTEGER},
            </if>
            <if test="houseDecorationId != null">
                HOUSE_DECORATION_ID = #{houseDecorationId,jdbcType=INTEGER},
            </if>
            <if test="provinceId != null">
                PROVINCE_ID = #{provinceId,jdbcType=INTEGER},
            </if>
            <if test="cityId != null">
                CITY_ID = #{cityId,jdbcType=INTEGER},
            </if>
            <if test="areaId != null">
                AREA_ID = #{areaId,jdbcType=INTEGER},
            </if>
            <if test="address != null">
                ADDRESS = #{address,jdbcType=VARCHAR},
            </if>
            <if test="elevatorTypeId != null">
                ELEVATOR_TYPE_ID = #{elevatorTypeId,jdbcType=INTEGER},
            </if>
            <if test="age != null">
                AGE = #{age,jdbcType=INTEGER},
            </if>
            <if test="houseStatus != null">
                HOUSE_STATUS = #{houseStatus,jdbcType=INTEGER},
            </if>
            <if test="sysStatus != null">
                SYS_STATUS = #{sysStatus,jdbcType=INTEGER},
            </if>
            <if test="auditingTime != null">
                AUDITING_TIME = #{auditingTime,jdbcType=TIMESTAMP},
            </if>
            <if test="operateTime != null">
                OPERATE_TIME = #{operateTime,jdbcType=TIMESTAMP},
            </if>
        </set>
        where ID = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.magic.rent.pojo.House">
    update HOUSE
    set TITTLE = #{tittle,jdbcType=VARCHAR},
      DESCRIPTION = #{description,jdbcType=VARCHAR},
      FACE_ID = #{faceId,jdbcType=INTEGER},
      FLOOR_AREA = #{floorArea,jdbcType=DOUBLE},
      POOL_AREA = #{poolArea,jdbcType=DOUBLE},
      EXPECT_PRICE = #{expectPrice,jdbcType=DOUBLE},
      BROKERAGE = #{brokerage,jdbcType=DOUBLE},
      COMMUNITY_ID = #{communityId,jdbcType=INTEGER},
      FLOOR = #{floor,jdbcType=INTEGER},
      LAYOUT_ID = #{layoutId,jdbcType=INTEGER},
      HOUSE_DECORATION_ID = #{houseDecorationId,jdbcType=INTEGER},
      PROVINCE_ID = #{provinceId,jdbcType=INTEGER},
      CITY_ID = #{cityId,jdbcType=INTEGER},
      AREA_ID = #{areaId,jdbcType=INTEGER},
      ADDRESS = #{address,jdbcType=VARCHAR},
      ELEVATOR_TYPE_ID = #{elevatorTypeId,jdbcType=INTEGER},
      AGE = #{age,jdbcType=INTEGER},
      HOUSE_STATUS = #{houseStatus,jdbcType=INTEGER},
      SYS_STATUS = #{sysStatus,jdbcType=INTEGER},
      AUDITING_TIME = #{auditingTime,jdbcType=TIMESTAMP},
      OPERATE_TIME = #{operateTime,jdbcType=TIMESTAMP}
    where ID = #{id,jdbcType=INTEGER}
  </update>
    <select id="selectBySelective" parameterType="com.magic.rent.pojo.House" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM
        HOUSE
        <where>
            <if test="tittle != null">
                AND TITTLE = #{tittle,jdbcType=VARCHAR}
            </if>
            <if test="description != null">
                AND DESCRIPTION = #{description,jdbcType=VARCHAR}
            </if>
            <if test="faceId != null">
                AND FACE_ID = #{faceId,jdbcType=INTEGER}
            </if>
            <if test="floorArea != null">
                AND FLOOR_AREA = #{floorArea,jdbcType=DOUBLE}
            </if>
            <if test="poolArea != null">
                AND POOL_AREA = #{poolArea,jdbcType=DOUBLE}
            </if>
            <if test="expectPrice != null">
                AND EXPECT_PRICE = #{expectPrice,jdbcType=DOUBLE}
            </if>
            <if test="brokerage != null">
                AND BROKERAGE = #{brokerage,jdbcType=DOUBLE}
            </if>
            <if test="communityId != null">
                AND COMMUNITY_ID = #{communityId,jdbcType=INTEGER}
            </if>
            <if test="floor != null">
                AND FLOOR = #{floor,jdbcType=INTEGER}
            </if>
            <if test="layoutId != null">
                AND LAYOUT_ID = #{layoutId,jdbcType=INTEGER}
            </if>
            <if test="houseDecorationId != null">
                AND HOUSE_DECORATION_ID = #{houseDecorationId,jdbcType=INTEGER}
            </if>
            <if test="provinceId != null">
                AND PROVINCE_ID = #{provinceId,jdbcType=INTEGER}
            </if>
            <if test="cityId != null">
                AND CITY_ID = #{cityId,jdbcType=INTEGER}
            </if>
            <if test="areaId != null">
                AND AREA_ID = #{areaId,jdbcType=INTEGER}
            </if>
            <if test="address != null">
                AND ADDRESS = #{address,jdbcType=VARCHAR}
            </if>
            <if test="elevatorTypeId != null">
                AND ELEVATOR_TYPE_ID = #{elevatorTypeId,jdbcType=INTEGER}
            </if>
            <if test="age != null">
                AND AGE = #{age,jdbcType=INTEGER}
            </if>
            <if test="houseStatus != null">
                AND HOUSE_STATUS = #{houseStatus,jdbcType=INTEGER}
            </if>
            <if test="sysStatus != null">
                AND SYS_STATUS = #{sysStatus,jdbcType=INTEGER}
            </if>
            <if test="auditingTime != null">
                AND AUDITING_TIME = #{auditingTime,jdbcType=TIMESTAMP}
            </if>
            <if test="operateTime != null">
                AND OPERATE_TIME = #{operateTime,jdbcType=TIMESTAMP}
            </if>
        </where>
    </select>
    <select id="selectByCompanyID" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM
        HOUSE
        JOIN COMMUNITY ON HOUSE.COMMUNITY_ID = COMMUNITY.ID
        JOIN COMPANY ON COMMUNITY.COMPANY_ID = COMPANY.ID
        WHERE COMPANY.ID =#{id,jdbcType=INTEGER}
    </select>
    <resultMap id="detail" type="com.magic.rent.pojo.House">
        <id column="ID" property="id" jdbcType="INTEGER"/>
        <result column="TITTLE" property="tittle" jdbcType="VARCHAR"/>
        <result column="DESCRIPTION" property="description" jdbcType="VARCHAR"/>
        <result column="ADDRESS" property="address" jdbcType="VARCHAR"/>
        <result column="AGE" property="age" jdbcType="INTEGER"/>
        <result column="FACE_ID" property="faceId" jdbcType="INTEGER"/>
        <result column="FLOOR_AREA" property="floorArea" jdbcType="DOUBLE"/>
        <result column="POOL_AREA" property="poolArea" jdbcType="DOUBLE"/>
        <result column="EXPECT_PRICE" property="expectPrice" jdbcType="DOUBLE"/>
        <result column="FLOOR" property="floor" jdbcType="INTEGER"/>
        <association property="province" javaType="com.magic.rent.pojo.Province">
            <result column="provinceName" property="provinceName" jdbcType="VARCHAR"/>
        </association>
        <association property="city" javaType="com.magic.rent.pojo.City">
            <result column="cityName" property="cityName" jdbcType="VARCHAR"/>
        </association>
        <association property="area" javaType="com.magic.rent.pojo.Area">
            <result column="areaName" property="areaName" jdbcType="VARCHAR"/>
        </association>
        <association property="houseLayout" javaType="com.magic.rent.pojo.HouseLayout">
            <result column="layoutName" property="name" jdbcType="VARCHAR"/>
        </association>
        <association property="community" javaType="com.magic.rent.pojo.Community">
            <id column="communityID" property="id" jdbcType="INTEGER"/>
            <result column="communityName" property="name" jdbcType="VARCHAR"/>
            <result column="communityLng" property="lng" jdbcType="DOUBLE"/>
            <result column="communityLat" property="lat" jdbcType="DOUBLE"/>
        </association>
        <association property="houseDecoration" javaType="com.magic.rent.pojo.HouseDecoration">
            <result column="decorationName" property="name" jdbcType="VARCHAR"/>
        </association>
        <association property="houseElevator" javaType="com.magic.rent.pojo.HouseElevator">
            <result column="elevatorName" property="name" jdbcType="VARCHAR"/>
        </association>
    </resultMap>
    <select id="selectDetailsByPrimaryKey" parameterType="java.lang.Integer" resultMap="detail">
      SELECT
          HOUSE.ID,
          HOUSE.TITTLE,
          HOUSE.DESCRIPTION,
          HOUSE.ADDRESS,
          HOUSE.AGE,
          HOUSE.FACE_ID,
          HOUSE.FLOOR_AREA,
          HOUSE.POOL_AREA,
          HOUSE.EXPECT_PRICE,
          HOUSE.FLOOR,
          PROVINCE.provinceName,
          CITY.cityName,
          AREA.areaName,
          HOUSE_LAYOUT.NAME layoutName,
          COMMUNITY.ID      communityID,
          COMMUNITY.NAME    communityName,
          COMMUNITY.LNG     communityLng,
          COMMUNITY.LAT     communityLat,
          HOUSE_DECORATION.NAME  decorationName,
          HOUSE_ELEVATOR.NAME elevatorName
        FROM HOUSE
          JOIN HOUSE_DECORATION ON HOUSE.HOUSE_DECORATION_ID = HOUSE_DECORATION.ID
          JOIN PROVINCE ON HOUSE.PROVINCE_ID = PROVINCE.provinceID
          JOIN CITY ON HOUSE.CITY_ID = CITY.cityID
          JOIN AREA ON HOUSE.AREA_ID = AREA.areaID
          JOIN COMMUNITY ON HOUSE.COMMUNITY_ID = COMMUNITY.ID
          JOIN HOUSE_LAYOUT ON HOUSE.LAYOUT_ID = HOUSE_LAYOUT.ID
          JOIN HOUSE_ELEVATOR ON HOUSE.ELEVATOR_TYPE_ID = HOUSE_ELEVATOR.ID
        WHERE HOUSE.ID = #{houseID,jdbcType=INTEGER}
    </select>
</mapper>